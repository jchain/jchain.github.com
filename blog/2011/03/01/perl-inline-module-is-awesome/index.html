
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Perl Inline module is awesome - My Octopress Blog</title>
  <meta name="author" content="Zandy">

  
  <meta name="description" content="As you might know that I&#8217;m doing some image processing with Perl and GD module. However, iterating a whole 512x512 image, i.e. every pixels, is &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://jchain.github.com/blog/2011/03/01/perl-inline-module-is-awesome/">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="/javascripts/ender.js"></script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <link href="/atom.xml" rel="alternate" title="My Octopress Blog" type="application/atom+xml">
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  

</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">My Octopress Blog</a></h1>
  
    <h2>A blogging framework for hackers.</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:jchain.github.com" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div>
<article class="hentry" role="article">
  
  <header>
    
      <h1 class="entry-title">Perl Inline Module Is Awesome</h1>
    
    
      <p class="meta">
        








  


<time datetime="2011-03-01T14:22:50-06:00" pubdate data-updated="true">Mar 1<span>st</span>, 2011</time>
        
      </p>
    
  </header>


<div class="entry-content"><p>As you might know that I&#8217;m doing some image processing with Perl and GD module. However, iterating a whole 512x512 image, i.e. every pixels, is prohibitively slow in Perl. Here is the Inline module to rescue. After playing around with it in several minutes, yes, only several minutes, my Perl code with C Inline function accessing the image boosted up 10 times faster!
Every Perl programmer should check it out: <a href="http://search.cpan.org/~sisyphus/Inline-0.48/Inline.pod">http://search.cpan.org/~sisyphus/Inline-0.48/Inline.pod</a></p>

<p>Edited: I would like to add a toy example here for anyone who are interested in Perl::Inline. It shows how to call external library(GD) from Perl script.</p>

<p>[sourcecode language=&#8221;c&#8221;]</p>

<h1>!/usr/bin/perl</h1>

<p>use strict;
use warnings;</p>

<p>print gd_test();</p>

<p>use Inline C => Config =>
LIBS => &#8216;-lgd&#8217;;
use Inline C => &lt;&lt;&#8217;END_OF_C_CODE&#8217;;</p>

<h1>include &#8220;gd.h&#8221;</h1>

<p>/<em> Bring in standard I/O so we can output the PNG to a file </em>/</p>

<h1>include &lt;stdio.h></h1>

<p>int gd_test() {</p>

<p>/<em> Declare the image </em>/</p>

<p>gdImagePtr im;</p>

<p>/<em> Declare output files </em>/</p>

<p>FILE <em>pngout, </em>jpegout;</p>

<p>/<em> Declare color indexes </em>/</p>

<p>int black;</p>

<p>int white;</p>

<p>/<em> Allocate the image: 64 pixels across by 64 pixels tall </em>/</p>

<p>im = gdImageCreate(64, 64);</p>

<p>/* Allocate the color black (red, green and blue all minimum).</p>

<p>Since this is the first color in a new image, it will</p>

<p>be the background color. */</p>

<p>black = gdImageColorAllocate(im, 0, 0, 0);</p>

<p>/<em> Allocate the color white (red, green and blue all maximum). </em>/</p>

<p>white = gdImageColorAllocate(im, 255, 255, 255);</p>

<p>/* Draw a line from the upper left to the lower right,</p>

<p>using white color index. */</p>

<p>gdImageLine(im, 0, 0, 63, 63, white);</p>

<p>#
/* Open a file for writing. &#8220;wb&#8221; means &#8220;write binary&#8221;, important</p>

<p>under MSDOS, harmless under Unix. */</p>

<p>pngout = fopen(&#8220;test.png&#8221;, &#8220;wb&#8221;);</p>

<p>/<em> Do the same for a JPEG-format file. </em>/</p>

<p>jpegout = fopen(&#8220;test.jpg&#8221;, &#8220;wb&#8221;);</p>

<p>/<em> Output the image to the disk file in PNG format. </em>/</p>

<p>gdImagePng(im, pngout);</p>

<p>/* Output the same image in JPEG format, using the default</p>

<p>JPEG quality setting. */</p>

<p>gdImageJpeg(im, jpegout, -1);</p>

<p>/<em> Close the files. </em>/</p>

<p>fclose(pngout);</p>

<p>fclose(jpegout);</p>

<p>/<em> Destroy the image in memory. </em>/</p>

<p>gdImageDestroy(im);</p>

<p>}
END_OF_C_CODE</p>

<p>[/sourcecode]</p>
</div>


  <footer>
    <p class="meta">
      
  

<span class="byline author vcard">Posted by <span class="fn">Zandy</span></span>

      








  


<time datetime="2011-03-01T14:22:50-06:00" pubdate data-updated="true">Mar 1<span>st</span>, 2011</time>
      


    </p>
    
      <div class="sharing">
  
  <a href="http://twitter.com/share" class="twitter-share-button" data-url="http://jchain.github.com/blog/2011/03/01/perl-inline-module-is-awesome/" data-via="" data-counturl="http://jchain.github.com/blog/2011/03/01/perl-inline-module-is-awesome/" >Tweet</a>
  
  
  
</div>

    
    <p class="meta">
      
        <a class="basic-alignment left" href="/blog/2011/02/27/smart-match-in-perl-5-10-is-the-equivalence-to-in-in-python/" title="Previous Post: Smart match ~~ in Perl 5.10 is the equivalence to 'in' in Python">&laquo; Smart match ~~ in Perl 5.10 is the equivalence to 'in' in Python</a>
      
      
        <a class="basic-alignment right" href="/blog/2011/03/03/built-gtk3-0-on-opensuse-11-1/" title="Next Post: Built gtk3.0 on openSUSE-11.1">Built gtk3.0 on openSUSE-11.1 &raquo;</a>
      
    </p>
  </footer>
</article>

</div>

<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2012/10/13/add-octave-load-path-based-on-the-hostname-change-the-color-of-prompt-etc/">Octave: Add local repository path based on the hostname, change the color of prompt etc..</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/09/28/quickly-look-up-a-word-or-phrase-from-commandline/">Quickly look up a word or phrase from commandline</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/09/27/mc-midnight-commander-4-8-5-is-slow-try-4-8-6/">MC (Midnight-Commander) 4.8.5 is slow, try 4.8.6</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/09/25/perl-script-retrieve-current-weather-condition-and-forecast/">Perl script: retrieve current weather condition and forecast</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/09/14/use-perl-like-sed/">Use Perl like sed</a>
      </li>
    
  </ul>
</section>






  
</aside>


    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2012 - Zandy -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  







  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
